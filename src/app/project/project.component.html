<div class="container">
  <h2>Project List</h2>
  <!-- Project Table -->
  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>Title</th>
          <th>Description</th>
          <th>Status</th>
          <th>Created By</th>
          <th>Program Manager</th>
          <th>Project Manager</th>
          <th>Start Date</th>
          <th>Due Date</th>
          <th>End Date</th>
          <th>Team Members</th>
          <th>Team Size</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>                             
        <tr *ngFor="let project of projects" (click)="openTask(project.id)">
          <td>{{ project.title }}</td>
          <td>{{ project.description }}</td>
          <td>
            <span [ngClass]="getStatusClass(project.status)">{{ project.status }}</span>
          </td>
          <td>{{ project.createdBy }}</td>
          <td>{{ project.programManager }}</td>
          <td>{{ project.projectManager }}</td>
          <td>{{ project.startDate}}</td>
          <td>{{ project.dueDate}}</td>
          <td>{{ project.endDate}}</td>
          <td>{{ project.teamMembers.join(', ') }}</td>
          <td>{{ project.teamMembers.length }}</td>
          <td>
            <button class="delete-btn" (click)="deleteProject(project.id); $event.stopPropagation()"><i class="fa-solid fa-trash-can"></i></button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Add Project Modal -->
  <button (click)="showModal = true">Add Project</button>

  <div class="modal" *ngIf="showModal">
    <div class="modal-content">
      <span class="close" (click)="showModal = false">&times;</span>
      <h3>Add New Project</h3>

      <form (ngSubmit)="addProject()">
        <label>Title</label>
        <input type="text" [(ngModel)]="projectData.title" name="title" required />

        <label>Description</label>
        <input type="text" [(ngModel)]="projectData.description" name="description" required />

        <label>Program Manager</label>
        <input type="text" [(ngModel)]="projectData.programManager" name="programManager" />

        <label>Project Manager</label>
        <input type="text" [(ngModel)]="projectData.projectManager" name="projectManager" />

        <label>Start Date</label>
        <input type="date" [(ngModel)]="projectData.startDate" name="startDate" />

        <label>Due Date</label>
        <input type="date" [(ngModel)]="projectData.dueDate" name="dueDate" />

        <label>End Date</label>
        <input type="date" [(ngModel)]="projectData.endDate" name="endDate" />

        <label>Team Members (comma-separated)</label>
        <input type="text" [(ngModel)]="projectData.teamMembers" name="teamMembers" />

        <button type="submit">Add Project</button>
      </form>
    </div>
  </div>
</div>
